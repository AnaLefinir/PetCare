@model PetCareApp.ModelView.MedicalHistory.MedicalHistoryModel

@{
    ViewBag.Title = "Medical History";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid">
    <div class="row">
        @Html.Partial("_PetInfo", Model)
        @Html.Partial("_OwnerInfo", Model)
    </div>
    <div class="row">
        @if (!Model.IsCreate)
        {
            <a class="btn btn-primary"> Add Visit </a>// TODO: Hacer el boton!
        }
    </div>
    <div class="row">
        <div class="col-lg-6">
            <div class="block">
                <div class="title">
                    <strong>Visit</strong>
                </div>
                <div class="block-body">
                    @{
                        string method = Model.IsCreate ? "CreateVisit" : "EditVisit";
                    }
                    <form class="form-horizontal" action="@Url.Action(method, "MedicalHistory", new {id = Model.PetId})" method="post">

                        @Html.AntiForgeryToken()



                        <input type="hidden" name="VisitId" value="@Model.Visit.VisitId" />
                        <input type="hidden" name="PetId" value="@Model.PetId" />

                        <div class="form-group row">
                            <label class="col-sm-3 form-control-label">Date</label>
                            <div class="col-sm-9">
                                <input type="date" name="VisitDate" class="form-control" value="@Model.Visit.VisitDate.ToString("yyyy-MM-dd")" />
                            </div>
                        </div>
                        <div class="line"></div>
                        <div class="form-group row">
                            <label class="col-sm-3 form-control-label">Title</label>
                            <div class="col-sm-9">
                                <input type="text" name="Title" class="form-control" value="@Model.Visit.Title">
                            </div>
                        </div>
                        <div class="line"></div>
                        <div class="form-group row">
                            <label class="col-sm-3 form-control-label">Description</label>
                            <div class="col-sm-9">
                                <textarea class="form-control" name="Description" row="25">@Model.Visit.Description</textarea>
                            </div>
                        </div>
                        <div class="line"></div>
                        <div class="form-group row">
                            <label class="col-sm-3 form-control-label">Price</label>
                            <div class="col-sm-9">
                                <div class="form-group">
                                    <div class="input-group">
                                        <span class="input-group-addon">$</span>
                                        <input type="text" class="form-control" name="VisitPrice" value="@Model.Visit.VisitPrice">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="line"></div>
                        <div class="form-group row">
                            <div class="col-sm-9 ml-auto">
                                <button type="reset" class="btn btn-secondary">Cancel</button>
                                @{
                                    string button = "Save Visit";
                                    if (!Model.IsCreate)
                                    {
                                        button = "Save changes";
                                    }
                                }
                                <button type="submit" class="btn btn-primary" >@button</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        @Html.Partial("_VisitList", Model)
    </div>
</div>